/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package tableinset;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
import javax.swing.JOptionPane;

/**
 *
 * @author JOHIR
 */
public class exam extends javax.swing.JFrame {

    Connection con;
    Statement st;
    ResultSet rs;

    public int incr = 0;

    public int result = 0;

    public int res1;

    public int result_pas_db;

    public int toall_row;

    public exam() {
        initComponents();
        dataincr();
        ckresult2();
   new Thread(new NN()).start();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        buttonGroup1 = new javax.swing.ButtonGroup();
        ck1 = new javax.swing.JCheckBox();
        l0 = new javax.swing.JLabel();
        ck2 = new javax.swing.JCheckBox();
        ck3 = new javax.swing.JCheckBox();
        l1 = new javax.swing.JLabel();
        l2 = new javax.swing.JLabel();
        l3 = new javax.swing.JLabel();
        next = new javax.swing.JButton();
        l4 = new javax.swing.JLabel();
        lh = new javax.swing.JLabel();
        lm = new javax.swing.JLabel();
        ls = new javax.swing.JLabel();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        buttonGroup1.add(ck1);
        ck1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ck1ActionPerformed(evt);
            }
        });

        l0.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        l0.setText("jLabel1");

        buttonGroup1.add(ck2);
        ck2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ck2ActionPerformed(evt);
            }
        });

        buttonGroup1.add(ck3);
        ck3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ck3ActionPerformed(evt);
            }
        });

        l1.setText("jLabel2");

        l2.setText("jLabel3");

        l3.setText("jLabel4");

        next.setText("Next");
        next.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                nextActionPerformed(evt);
            }
        });

        l4.setText("jLabel5");

        lh.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        lh.setForeground(new java.awt.Color(255, 51, 51));
        lh.setText("jLabel1");

        lm.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        lm.setForeground(new java.awt.Color(255, 0, 0));
        lm.setText("jLabel2");

        ls.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        ls.setForeground(new java.awt.Color(255, 51, 51));
        ls.setText("jLabel3");

        jLabel1.setText(":");

        jLabel2.setText(":");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(64, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addComponent(next, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(354, 354, 354)
                        .addComponent(l4, javax.swing.GroupLayout.PREFERRED_SIZE, 76, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(291, 291, 291))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addComponent(lh)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jLabel1)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lm)
                        .addGap(12, 12, 12)
                        .addComponent(jLabel2)
                        .addGap(18, 18, 18)
                        .addComponent(ls)
                        .addGap(35, 35, 35))))
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(64, 64, 64)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(ck2)
                                .addGap(18, 18, 18)
                                .addComponent(l2, javax.swing.GroupLayout.PREFERRED_SIZE, 89, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(ck3)
                                .addGap(18, 18, 18)
                                .addComponent(l3, javax.swing.GroupLayout.PREFERRED_SIZE, 98, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(ck1)
                                .addGap(18, 18, 18)
                                .addComponent(l1, javax.swing.GroupLayout.PREFERRED_SIZE, 107, javax.swing.GroupLayout.PREFERRED_SIZE))))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(36, 36, 36)
                        .addComponent(l0, javax.swing.GroupLayout.PREFERRED_SIZE, 451, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(34, 34, 34)
                .addComponent(l0, javax.swing.GroupLayout.PREFERRED_SIZE, 14, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lh)
                    .addComponent(lm)
                    .addComponent(ls)
                    .addComponent(jLabel1)
                    .addComponent(jLabel2))
                .addGap(30, 30, 30)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(l1)
                    .addComponent(ck1))
                .addGap(30, 30, 30)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(ck2)
                    .addComponent(l2))
                .addGap(48, 48, 48)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(ck3)
                    .addComponent(l3))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 94, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(next, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(l4))
                .addGap(30, 30, 30))
        );

        pack();
    }// </editor-fold>                        

    public void dataincr() {

        try {

            Class.forName("com.mysql.jdbc.Driver");
            java.sql.Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/exam", "root", "");
            String sql = "SELECT *  FROM Table1 WHERE id='" + incr + "'";
            java.sql.PreparedStatement pst = con.prepareStatement(sql);

            ResultSet rs = pst.executeQuery(sql);

            if (rs.next()) {

                res1 = rs.getInt("r");

                System.out.println(result);

                String qs0 = rs.getString("q0");
                String qs1 = rs.getString("q1");
                String qs2 = rs.getString("q2");
                String qs3 = rs.getString("q3");

                l0.setText(qs0);
                l1.setText(qs1);
                l2.setText(qs2);
                l3.setText(qs3);

            }

        } catch (Exception e) {
            JOptionPane.showMessageDialog(null, e);
        }

    }

    public void ckresult() {

        if (res1 == ck) {
            result++;
        }

        System.out.println("db_res:" + res1);
        System.out.println("res:" + result);
        System.out.println("incr:" + incr);

        res1 = 0;

    }

    public void ckresult2() {

        try {

            Class.forName("com.mysql.jdbc.Driver");
            java.sql.Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/exam", "root", "");
            String sql = "SELECT COUNT(*) AS id FROM Table1";
            java.sql.PreparedStatement pst = con.prepareStatement(sql);

            ResultSet rs = pst.executeQuery(sql);

            if (rs.next()) {

                toall_row = rs.getInt("id");

            }

        } catch (Exception e) {
            JOptionPane.showMessageDialog(null, e);
        }

    }


    private void nextActionPerformed(java.awt.event.ActionEvent evt) {                                     

        incr++;

        ckresult();
        dataincr();

        if (toall_row == incr) {

            l0.setVisible(false);
            l1.setVisible(false);
            l2.setVisible(false);
            l3.setVisible(false);

            ck1.setVisible(false);
            ck2.setVisible(false);
            ck3.setVisible(false);
             l4.setText("result:"+result);

        }

          buttonGroup1.clearSelection();

    }                                    

    private void ck1ActionPerformed(java.awt.event.ActionEvent evt) {                                    
        ck = 1;
    }                                   

    private void ck2ActionPerformed(java.awt.event.ActionEvent evt) {                                    
        ck = 2;
    }                                   

    private void ck3ActionPerformed(java.awt.event.ActionEvent evt) {                                    
        ck = 3;
    }                                   

    private class NN implements Runnable{

         int h=0,m=5,s=0,i;
      
        int sec=(h*60*60)+(m*60);
        int count=0;
        String s1,s2,s3;
        
        public void run() {
              s1=Integer.toString(h);
                lh.setText(s1);
              s2=Integer.toString(m);
               lm.setText(s2);
          for(i=0;i<=sec;i++){
              
                  count++;  
                  s3=Integer.toString(count);
                  ls.setText(s3);
                  
                  if(i==sec){next.setVisible(false); 
                 l0.setVisible(false);
               l1.setVisible(false);
              l2.setVisible(false);
              l3.setVisible(false);

              ck1.setVisible(false);
              ck2.setVisible(false);
               ck3.setVisible(false);
                   
                   l4.setText("result:"+result);
                  }
              if(count==60){
                  
                  if(m>0){
                      m--;
                      s2=Integer.toString(m);
                     lm.setText(s2);
                  
                 }if(h>0){
                  
                     h--;
                     s1=Integer.toString(h);
                     lh.setText(s1);
                 }
                 else{
                      
                    
                 }    
                 
                 count=0;
              }
            
               try{
               
                   Thread.sleep(100);
                           
                   
               }catch (Exception ex) {
               
               }
               
              
            }
            
        }
    
    }
    
    
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(exam.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(exam.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(exam.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(exam.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new exam().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify                     
    private javax.swing.ButtonGroup buttonGroup1;
    private javax.swing.JCheckBox ck1;
    private javax.swing.JCheckBox ck2;
    private javax.swing.JCheckBox ck3;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel l0;
    private javax.swing.JLabel l1;
    private javax.swing.JLabel l2;
    private javax.swing.JLabel l3;
    private javax.swing.JLabel l4;
    private javax.swing.JLabel lh;
    private javax.swing.JLabel lm;
    private javax.swing.JLabel ls;
    private javax.swing.JButton next;
    // End of variables declaration                   

    private int ck;

}
